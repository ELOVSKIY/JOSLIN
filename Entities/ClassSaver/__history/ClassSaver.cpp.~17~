//---------------------------------------------------------------------------

#pragma hdrstop

#include "ClassSaver.h"

#include <fstream>
#include "KotlinClass.h"

ClassSaver::ClassSaver(string filePath, Object *object, bool dbAnnotation, bool serializeAnnotation) {
    linker = new Linker(object, dbAnnotation, serializeAnnotation);
    this->filePath = filePath;
    save();
}

void ClassSaver::save() {
    list<KotlinClass*> li = linker ->getClassesList();

	for (auto& c : li){
        ofstream fout;
        auto path = filePath + c->getFileName();
        fout.open(filePath + c->getFileName());
        fout<<c->getFileContext();
        fout.close();
    }
}
//---------------------------------------------------------------------------
#pragma package(smart_init)
